<app-toolbar [templateRef]="headerTemplateRef"></app-toolbar>
<div fxLayout="column" fxLayoutGap="10px" class="pad10">
	<ng-template #headerTemplateRef>
		<app-title-bar class="light-grey-color" title="{{'FIELD_PERMISSIONS' | translate}}" fxLayoutGap="10px"
			(buttonRightOnClick)="saveField()" [buttonText]="'SAVE' | translate" [buttonColor]="'primary'">
		</app-title-bar>
	</ng-template>

	<div class="mat-elevation-z8">
		<table mat-table [dataSource]="dataSource" matSort>

			<!-- FIELD_NAME Column -->
			<ng-container matColumnDef="FIELD_NAME">
				<th class="custom-theme-primary-color" mat-header-cell mat-sort-header *matHeaderCellDef> Fields </th>
				<td mat-cell *matCellDef="let element"> {{element.FIELD_NAME}} </td>
			</ng-container>

			<!-- PERMISSION Column -->
			<ng-container matColumnDef="PERMISSION">
				<th class="custom-theme-primary-color" mat-header-cell mat-sort-header *matHeaderCellDef>
					Permission </th>
				<td mat-cell *matCellDef="let element">

					<mat-menu #menu="matMenu" yPosition="below">
						<div>
							<div *ngFor="let option of accessOptions">
								<button style="padding: 0px 10px;line-height: 35px;height: 35px;" (click)="element.PERMISSION = option" mat-menu-item>
									<span style="font-size: 12px;font-weight: normal;">
										{{option}}
									</span>
									<mat-icon fxLayoutAlign="end center" *ngIf="element.PERMISSION=== option"
										style="font-size: 18px;float: right;margin-right: 0px;line-height: 35px;font-weight: bold;height: 35px;">done
									</mat-icon>
								</button>
							</div>
						</div>
					</mat-menu>
					<button [disableRipple]="true" mat-icon-button [matMenuTriggerFor]="menu" (click)="$event.stopPropagation()"
						style="width:fit-content;">
						<span style="font-size: 12px;font-weight: normal;">
							<div fxLayoutGap="10px">
								<div fxFlex="90px" fxLayoutAlign="start">
									{{element.PERMISSION}}
								</div>
								<div fxLayoutAlign="end" style="padding-left:8px">
									<mat-icon style="font-size: 20px;padding-top:10px">keyboard_arrow_down</mat-icon>
								</div>
							</div>
						</span>
					</button>
				</td>
			</ng-container>
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
		</table>
		<mat-paginator [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
		</mat-paginator>
	</div>
